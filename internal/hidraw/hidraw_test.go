package hidraw

import (
	"testing"
)

func TestPartialMatch(t *testing.T) {
	cases := []struct {
		a    []byte
		b    []byte
		want bool
	}{
		{[]byte{}, []byte{}, true},
		{[]byte{0xff}, []byte{}, true},
		{[]byte{0xff}, []byte{0xff}, true},

		{[]byte{0xff, 0xee, 0xdd, 0xcc}, []byte{0xff}, true},
		{[]byte{0xff, 0xee, 0xdd, 0xcc}, []byte{0xff, 0xee}, true},
		{[]byte{0xff, 0xee, 0xdd, 0xcc}, []byte{0xff, 0xee, 0xdd}, true},
		{[]byte{0xff, 0xee, 0xdd, 0xcc}, []byte{0xff, 0xee, 0xdd, 0xcc}, true},

		{[]byte{}, []byte{0xff}, false},
		{[]byte{0xff}, []byte{0xff, 0xff}, false},

		{[]byte{0xff, 0xee, 0xdd, 0xcc}, []byte{0xee}, false},
		{[]byte{0xff, 0xee, 0xdd, 0xcc}, []byte{0xee, 0xdd}, false},
		{[]byte{0xff, 0xee, 0xdd, 0xcc}, []byte{0xff, 0xee, 0xcc}, false},
	}

	for i, tt := range cases {
		res := partialMatch(tt.a, tt.b)
		if res != tt.want {
			t.Fatalf("%d: got %v want %v", i, res, tt.want)
		}
	}
}
